{
  "states": [
    "initial",
    "connected",
    "transit_mode",
    "reader_mode",
    "disconnected",
    "group_selected",
    "article_selected",
    "posting",
    "ihave_transfer"
  ],
  "initial_state": "initial",
  "final_states": [
    "disconnected"
  ],
  "transitions": [
    {
      "from": "initial",
      "requisite": "client connects",
      "to": "connected",
      "actions": [
        "server sends greeting"
      ],
      "response": "greeting"
    },
    {
      "from": "initial",
      "requisite": "Connection established",
      "to": "connected",
      "actions": [
        "Server sends greeting"
      ],
      "response": "200 (posting allowed) or 201 (posting prohibited) or 400/502 (service unavailable)"
    },
    {
      "from": "connected",
      "requisite": "mode-switching server",
      "to": "transit_mode",
      "actions": [
        "advertise MODE-READER capability",
        "do not advertise READER capability"
      ],
      "response": "capabilities list with MODE-READER"
    },
    {
      "from": "transit_mode",
      "requisite": "MODE READER command",
      "to": "reader_mode",
      "actions": [
        "do not advertise MODE-READER capability",
        "advertise READER capability"
      ],
      "response": "200 response"
    },
    {
      "from": "connected",
      "requisite": "Client sends CAPABILITIES",
      "to": "connected",
      "actions": [
        "Server returns capability list"
      ],
      "response": "101 Capability list follows"
    },
    {
      "from": "connected",
      "requisite": "Client sends MODE READER",
      "to": "connected",
      "actions": [
        "Server switches to reader mode if mode-switching"
      ],
      "response": "200 (posting allowed) or 201 (posting prohibited) or 502 (reading unavailable)"
    },
    {
      "from": "connected",
      "requisite": "Client sends QUIT",
      "to": "disconnected",
      "actions": [
        "Server acknowledges and closes connection"
      ],
      "response": "205 Connection closing"
    },
    {
      "from": "connected",
      "requisite": "Server receives 400/502 response or client disconnects",
      "to": "disconnected",
      "actions": [
        "Server closes connection"
      ],
      "response": "None"
    },
    {
      "from": "initial",
      "requisite": "GROUP command with valid group",
      "to": "group_selected",
      "actions": [
        "set currently selected newsgroup",
        "set current article number to first article"
      ],
      "response": "211 number low high group"
    },
    {
      "from": "initial",
      "requisite": "GROUP command with invalid group",
      "to": "initial",
      "actions": [],
      "response": "411 No such newsgroup"
    },
    {
      "from": "initial",
      "requisite": "LISTGROUP command with valid group",
      "to": "group_selected",
      "actions": [
        "set currently selected newsgroup",
        "set current article number to first article"
      ],
      "response": "211 number low high group list follows (multi-line)"
    },
    {
      "from": "initial",
      "requisite": "LISTGROUP command with invalid group",
      "to": "initial",
      "actions": [],
      "response": "411 No such newsgroup"
    },
    {
      "from": "group_selected",
      "requisite": "ARTICLE/HEAD/BODY/STAT command with article number",
      "to": "article_selected",
      "actions": [
        "set current article number"
      ],
      "response": "220/221/222/223 n message-id (with article content for ARTICLE/HEAD/BODY)"
    },
    {
      "from": "group_selected",
      "requisite": "ARTICLE/HEAD/BODY/STAT command with no argument",
      "to": "article_selected",
      "actions": [
        "use current article number"
      ],
      "response": "220/221/222/223 n message-id (with article content for ARTICLE/HEAD/BODY)"
    },
    {
      "from": "group_selected",
      "requisite": "NEXT command",
      "to": "article_selected",
      "actions": [
        "set current article number to next article"
      ],
      "response": "223 n message-id"
    },
    {
      "from": "group_selected",
      "requisite": "LAST command",
      "to": "article_selected",
      "actions": [
        "set current article number to previous article"
      ],
      "response": "223 n message-id"
    },
    {
      "from": "article_selected",
      "requisite": "NEXT command at last article",
      "to": "article_selected",
      "actions": [],
      "response": "421 No next article in this group"
    },
    {
      "from": "article_selected",
      "requisite": "LAST command at first article",
      "to": "article_selected",
      "actions": [],
      "response": "422 No previous article in this group"
    },
    {
      "from": "initial",
      "requisite": "POST command when posting allowed",
      "to": "posting",
      "actions": [],
      "response": "340 Send article to be posted"
    },
    {
      "from": "initial",
      "requisite": "POST command when posting prohibited",
      "to": "initial",
      "actions": [],
      "response": "440 Posting not permitted"
    },
    {
      "from": "posting",
      "requisite": "Article data sent and accepted",
      "to": "initial",
      "actions": [
        "process and store article"
      ],
      "response": "240 Article received OK"
    },
    {
      "from": "posting",
      "requisite": "Article data sent but rejected",
      "to": "initial",
      "actions": [],
      "response": "441 Posting failed"
    },
    {
      "from": "initial",
      "requisite": "IHAVE command with wanted message-id",
      "to": "ihave_transfer",
      "actions": [],
      "response": "335 Send article to be transferred"
    },
    {
      "from": "initial",
      "requisite": "IHAVE command with unwanted message-id",
      "to": "initial",
      "actions": [],
      "response": "435 Article not wanted"
    },
    {
      "from": "initial",
      "requisite": "IHAVE command with message-id to retry later",
      "to": "initial",
      "actions": [],
      "response": "436 Transfer not possible; try again later"
    },
    {
      "from": "ihave_transfer",
      "requisite": "Article data sent and accepted",
      "to": "initial",
      "actions": [
        "process and store article"
      ],
      "response": "235 Article transferred OK"
    },
    {
      "from": "ihave_transfer",
      "requisite": "Article data sent but transfer failed",
      "to": "initial",
      "actions": [],
      "response": "436 Transfer failed; try again later"
    },
    {
      "from": "ihave_transfer",
      "requisite": "Article data sent but rejected",
      "to": "initial",
      "actions": [],
      "response": "437 Transfer rejected; do not retry"
    },
    {
      "from": "transit_mode",
      "requisite": "inactivity timeout",
      "to": "initial",
      "actions": [
        "close connection"
      ],
      "response": "none"
    },
    {
      "from": "reader_mode",
      "requisite": "inactivity timeout",
      "to": "initial",
      "actions": [
        "close connection"
      ],
      "response": "none"
    },
    {
      "from": "connected",
      "requisite": "inactivity timeout",
      "to": "initial",
      "actions": [
        "close connection"
      ],
      "response": "none"
    }
  ]
}